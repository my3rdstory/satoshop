---
id: task-22
title: Blink 결제 재조정 및 모니터링 파이프라인 구축
status: To Do
assignee: []
created_date: '2025-09-29 05:52'
updated_date: '2025-09-29 05:57'
labels: []
dependencies: []
---

## Description

<!-- SECTION:DESCRIPTION:BEGIN -->
Blink 결제 성공 여부가 실시간으로 반영되지 못하더라도 최종적으로 주문 누락을 방지하기 위해 재조정 프로세스와 관측 체계를 도입해야 한다. Blink API에서 결제 완료된 인보이스를 주기적으로 조회해 주문 데이터와 교차 검증하고, 이상 징후를 즉시 파악할 수 있는 로그와 알림을 정비한다.

검토 결과, 재조정 잡이 실제로 주문을 복구하려면 task-21에서 도입할 주문 스냅샷/재고 관리 구조가 전제되어야 하며, Blink API 호출 주기와 rate limit에 맞춘 배치 설계가 필요하다. 모니터링은 인보이스·주문 상태 로그를 기반으로 Slack/Sentry 등으로 연결하고, 누락 발견 시 운영 큐에 적재할 리커버리 경로도 정의해야 한다.
<!-- SECTION:DESCRIPTION:END -->

## Acceptance Criteria
<!-- AC:BEGIN -->
- [ ] #1 Blink API에서 일정 주기로 settled 혹은 paid 상태의 인보이스를 조회해 주문 데이터와 비교하는 배치 또는 잡이 동작하며, 누락된 주문을 자동으로 복구하거나 조치 대기 큐에 적재한다.
- [ ] #2 재조정 과정에서 복구된 인보이스는 중복 주문을 만들지 않고 기존 주문 상태만 갱신하거나 신규 주문을 생성하는 등 idem 보장 로직이 포함되어 있다.
- [ ] #3 결제 성공인데 주문이 존재하지 않거나 처리 지연이 임계치를 넘으면 로그와 모니터링 알림(예: Slack, 이메일 등)이 발송되어 운영자가 즉시 인지할 수 있다.
<!-- AC:END -->
