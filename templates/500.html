{% extends 'myshop/base.html' %}
{% load static %}

{% block title %}서버 오류가 발생했습니다 - {% if site_settings and site_settings.site_title %}{{ site_settings.site_title }}{% else %}SatoShop{% endif %}{% endblock %}

{% block content %}
<div class="min-h-screen bg-gradient-to-br from-red-50 to-pink-100 dark:from-red-900/20 dark:to-pink-900/20 flex items-center justify-center px-4">
  <div class="max-w-2xl w-full">
    <!-- 메인 500 컨테이너 -->
    <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-8 md:p-12 text-center border border-gray-200 dark:border-gray-700">
      
      <!-- 500 애니메이션 아이콘 -->
      <div class="mb-8">
        <div class="relative inline-block">
          <!-- 배경 원 -->
          <div class="w-32 h-32 bg-gradient-to-br from-red-100 to-pink-100 dark:from-red-900/30 dark:to-pink-900/30 rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg">
            <!-- 아이콘 -->
            <div class="w-16 h-16 bg-gradient-to-br from-red-500 to-pink-500 rounded-full flex items-center justify-center animate-pulse">
              <i class="fas fa-server text-2xl text-white"></i>
            </div>
          </div>
          <!-- 떠다니는 점들 -->
          <div class="absolute -top-2 -right-2 w-4 h-4 bg-red-400 rounded-full animate-bounce" style="animation-delay: 0.1s;"></div>
          <div class="absolute -bottom-2 -left-2 w-3 h-3 bg-pink-400 rounded-full animate-bounce" style="animation-delay: 0.3s;"></div>
        </div>
      </div>
      
      <!-- 500 텍스트 -->
      <div class="mb-8">
        <h1 class="text-8xl md:text-9xl font-black text-transparent bg-clip-text bg-gradient-to-r from-red-500 to-pink-500 mb-4 leading-none">
          500
        </h1>
        <h2 class="text-2xl md:text-3xl font-bold text-gray-900 dark:text-white mb-4">
          서버 오류가 발생했습니다
        </h2>
        <p class="text-lg text-gray-600 dark:text-gray-400 max-w-md mx-auto">
          일시적인 서버 문제로 인해 요청을 처리할 수 없습니다.
        </p>
      </div>

      <!-- 주요 액션 버튼들 -->
      <div class="flex flex-col sm:flex-row gap-4 justify-center mb-8">
        <a href="{% url 'myshop:home' %}" 
           class="inline-flex items-center justify-center px-8 py-4 bg-gradient-to-r from-red-500 to-pink-500 text-white font-semibold rounded-xl hover:from-red-600 hover:to-pink-600 transform hover:scale-105 transition-all duration-200 shadow-lg hover:shadow-xl">
          <i class="fas fa-home mr-3"></i>
          홈페이지로 이동
        </a>
        
        <button onclick="window.location.reload()" 
                class="inline-flex items-center justify-center px-8 py-4 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 font-semibold rounded-xl hover:bg-gray-200 dark:hover:bg-gray-600 transform hover:scale-105 transition-all duration-200 shadow-lg hover:shadow-xl">
          <i class="fas fa-sync-alt mr-3"></i>
          페이지 새로고침
        </button>
      </div>

      <!-- 오류 설명 -->
      <div class="border-t border-gray-200 dark:border-gray-700 pt-8">
        <div class="bg-gradient-to-r from-red-50 to-pink-50 dark:from-red-900/10 dark:to-pink-900/10 rounded-xl p-6 border border-red-200 dark:border-red-800">
          <h4 class="font-semibold text-red-800 dark:text-red-200 mb-3 flex items-center justify-center">
            <i class="fas fa-exclamation-triangle mr-2"></i>
            현재 상황
          </h4>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-3 text-sm text-red-700 dark:text-red-300">
            <div class="flex items-start space-x-2">
              <i class="fas fa-exclamation-circle text-red-500 mt-0.5 flex-shrink-0"></i>
              <span>서버에서 예상치 못한 오류가 발생했습니다</span>
            </div>
            <div class="flex items-start space-x-2">
              <i class="fas fa-exclamation-circle text-red-500 mt-0.5 flex-shrink-0"></i>
              <span>개발팀에서 문제를 확인하고 있습니다</span>
            </div>
            <div class="flex items-start space-x-2">
              <i class="fas fa-exclamation-circle text-red-500 mt-0.5 flex-shrink-0"></i>
              <span>잠시 후 다시 시도해 주세요</span>
            </div>
          </div>
        </div>
      </div>
      
      <!-- 대안 액션들 -->
      <div class="mt-8 pt-6 border-t border-gray-200 dark:border-gray-700">
        <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-6">이런 방법을 시도해보세요</h3>
        
        <div class="grid grid-cols-1 sm:grid-cols-3 gap-4">
          <!-- 새로고침 -->
          <button onclick="window.location.reload()" 
                  class="group p-4 bg-gray-50 dark:bg-gray-700/50 rounded-xl hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-all duration-200 border border-gray-200 dark:border-gray-600 hover:border-blue-300 dark:hover:border-blue-700">
            <div class="flex flex-col items-center text-center">
              <div class="w-12 h-12 bg-blue-100 dark:bg-blue-900/30 rounded-lg flex items-center justify-center mb-3 group-hover:bg-blue-200 dark:group-hover:bg-blue-900/50 transition-colors">
                <i class="fas fa-sync-alt text-blue-600 dark:text-blue-400"></i>
              </div>
              <span class="text-sm font-medium text-gray-700 dark:text-gray-300 group-hover:text-blue-600 dark:group-hover:text-blue-400">페이지 새로고침</span>
            </div>
          </button>

          <!-- 잠시 기다리기 -->
          <div class="group p-4 bg-gray-50 dark:bg-gray-700/50 rounded-xl border border-gray-200 dark:border-gray-600">
            <div class="flex flex-col items-center text-center">
              <div class="w-12 h-12 bg-yellow-100 dark:bg-yellow-900/30 rounded-lg flex items-center justify-center mb-3">
                <i class="fas fa-clock text-yellow-600 dark:text-yellow-400"></i>
              </div>
              <span class="text-sm font-medium text-gray-700 dark:text-gray-300">잠시 기다린 후 재시도</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', function() {
  // 현재 시간 표시
  const errorTimeElement = document.getElementById('error-time');
  if (errorTimeElement) {
    const now = new Date();
    errorTimeElement.textContent = now.toLocaleString('ko-KR');
  }
  
  // 페이지 로드 애니메이션
  const container = document.querySelector('.max-w-2xl');
  if (container) {
    container.style.opacity = '0';
    container.style.transform = 'translateY(20px)';
    
    setTimeout(() => {
      container.style.transition = 'all 0.6s ease-out';
      container.style.opacity = '1';
      container.style.transform = 'translateY(0)';
    }, 100);
  }
  
  // 자동 새로고침 (30초 후)
  let autoRefreshTimer = setTimeout(() => {
    if (confirm('페이지를 자동으로 새로고침하시겠습니까?')) {
      window.location.reload();
    }
  }, 30000);
  
  // 사용자가 수동으로 새로고침하면 자동 새로고침 취소
  document.addEventListener('click', function() {
    clearTimeout(autoRefreshTimer);
  });
  
  // 키보드 단축키
  document.addEventListener('keydown', function(e) {
    // F5 또는 Ctrl+R로 새로고침
    if (e.key === 'F5' || (e.ctrlKey && e.key === 'r')) {
      clearTimeout(autoRefreshTimer);
    }
    // ESC 키로 홈으로 이동
    if (e.key === 'Escape') {
      window.location.href = "{% url 'myshop:home' %}";
    }
  });
});
</script>
{% endblock %} 