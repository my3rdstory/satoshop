# 직접 계약 생성 역할별 연락처 입력 개선

## 변경 사항
- 역할 선택 직후 역할에 맞는 라이트닝/이메일 입력 카드가 2개씩 노출되도록 템플릿을 재구성했습니다.
- 수행자 선택 시 라이트닝 주소 필수 안내 및 유효성 검사를 추가하고, 선택한 역할에 맞춰 이메일 안내 문구를 토글합니다.
- 신규 섹션 레이아웃과 토글 동작을 위한 CSS/JS를 확장했습니다.
- 의뢰자 선택 시에는 이메일 입력만 남기고 라이트닝 주소 카드를 감춰 지불자에게 불필요한 입력을 요구하지 않습니다.
- 드래프트 화면의 수행자 라이트닝 주소 라벨을 "(필수)" 표기로 명확히 변경했습니다.
- 계약 미리보기 카드에서는 수행자 라이트닝만 노출하도록 조정하고, 모달 지급 상세 섹션은 강조 스타일을 추가해 가독성을 높였습니다.
- 분할 지급 선택 시 미리보기에 초기 6회로 잘못 표기되던 문제를 실제 분할 단계 수(행 기준)로 계산하도록 수정했습니다.
- 분할 입력 필드에서 2단계 내용을 입력하면 1단계의 지급 예정일이 지워지던 현상을 방지하기 위해 금액 입력만 합계 계산에 사용하도록 자바스크립트를 손봤습니다.
- 계약서 미리보기 모달에서도 수행자 라이트닝만 노출되도록 의뢰자 항목을 제거했습니다.
- 최종 계약서 주소(검토 화면)에서도 수행자 라이트닝만 표기하도록 의뢰자 라이트닝 항목을 삭제했습니다.
- 분할 지급 카드의 "분할 N" 라벨을 비트코인 오렌지 톤(#f7931a)으로 강조해 가시성을 높였습니다.
- 초대/공유 화면에서도 의뢰자 라이트닝 항목을 제거해 전 단계에서 동일한 정보만 노출되도록 했습니다.
- 의뢰자 서명 후 공유 링크에서 수행자가 서명할 때 정산용 라이트닝 주소를 필수로 입력하도록 폼/로직을 확장했습니다.
- 공유 링크 폼에서 정산 라이트닝 입력을 이메일 위로 배치하고 이메일 필드는 "(선택)" 표기로 정리했습니다.
- 공유 링크 서명 폼의 라이트닝/이메일 입력을 한 줄 그리드로 배치해 동시에 확인/입력할 수 있도록 개선했습니다.
- 서명 동의 체크 3개를 세로 배열로 정리해 가독성을 높였습니다.
- 계약 체결 버튼을 제출 중에 비활성화하고 "진행 중... 잠시만 기다려 주세요." 문구를 띄워 처리 상태를 안내합니다.
- 계약서 PDF를 CJK 폰트(HYGoThic)로 렌더링해 한글이 깨지지 않도록 하고, 첨부한 PDF 파일을 최종 계약서 뒤에 병합되도록 개선했습니다.
- Django Admin의 직접 계약 단계 로그 화면을 계약별 4단계 타임라인으로 재구성해 한 번에 상태를 확인할 수 있습니다.
- 장고 어드민에 계약 결제 정책(의뢰자/수행자별 사토시 금액)을 설정할 수 있는 `ContractPricingSetting` 관리 화면을 추가했습니다.
- 직접 계약 소개 화면을 전면 재구성해 라이트닝 로그인 안내, 입력 항목, 기능 요약을 간결하게 전달하도록 UI를 정리했습니다.
- 네비게이션의 "직접 계약 생성" 버튼을 바로 드래프트 화면(`/contracts/direct/draft/`)으로 연결해 한 번에 초안을 작성할 수 있게 했습니다.
- 기본 파일 스토리지를 S3 백엔드로 강제하도록 설정해 서명 이미지와 최종 계약 PDF 등 모든 파일이 오브젝트 스토리지에 저장되도록 했습니다.
- 계약 PDF 생성 시 시스템 폰트(DejaVuSans)를 사용해 한글이 더 이상 깨지지 않도록 했고, 서명 제출 버튼 텍스트를 "진행 중입니다..." 형태로 명확히 안내합니다.
