# Generated by Django 5.2.2 on 2025-06-11 01:39

from django.db import migrations


def add_bitcoin_technical_keywords(apps, schema_editor):
    """비트코인 기술 관련 예약어들을 추가"""
    ReservedStoreId = apps.get_model('stores', 'ReservedStoreId')
    
    # 비트코인 기술 예약어 목록
    bitcoin_keywords = [
        # 비트코인 기본 개념
        ('21m', '비트코인 총 발행량 2100만개'),
        ('2100', '비트코인 총 발행량 관련'),
        
        # 암호학 관련
        ('hash', '해시 함수'),
        ('hashing', '해싱 과정'),
        ('hashes', '해시들'),
        ('sha256', 'SHA-256 해시 알고리즘'),
        ('sha', 'SHA 해시'),
        ('ripemd160', 'RIPEMD-160 해시'),
        ('merkle', '머클 트리'),
        ('merkletree', '머클 트리'),
        ('signature', '디지털 서명'),
        ('signatures', '디지털 서명들'),
        ('sign', '서명하기'),
        ('signing', '서명 과정'),
        ('signed', '서명된'),
        ('verify', '검증'),
        ('verification', '검증 과정'),
        ('ecdsa', 'ECDSA 서명 알고리즘'),
        ('schnorr', '슈노르 서명'),
        ('secp256k1', 'secp256k1 타원곡선'),
        ('elliptic', '타원곡선'),
        ('curve', '곡선'),
        ('cryptography', '암호학'),
        ('crypto', '암호화'),
        ('private', '프라이빗'),
        ('privatekey', '개인키'),
        ('public', '퍼블릭'),
        ('publickey', '공개키'),
        ('key', '키'),
        ('keys', '키들'),
        ('keychain', '키체인'),
        ('address', '주소'),
        ('addresses', '주소들'),
        ('wallet', '지갑'),
        ('wallets', '지갑들'),
        ('seed', '시드'),
        ('mnemonic', '니모닉'),
        ('bip39', 'BIP39 표준'),
        ('encrypt', '암호화'),
        ('encryption', '암호화 과정'),
        ('decrypt', '복호화'),
        ('decryption', '복호화 과정'),
        ('cipher', '암호'),
        ('digest', '다이제스트'),
        ('proof', '증명'),
        ('proofofwork', '작업증명'),
        ('pow', '작업증명'),
        ('validate', '검증'),
        ('validation', '검증 과정'),
        ('verified', '검증된'),
        
        # 채굴 관련
        ('mining', '채굴'),
        ('miner', '채굴자'),
        ('miners', '채굴자들'),
        ('mine', '채굴하기'),
        ('mined', '채굴된'),
        ('mining-pool', '채굴풀'),
        ('pool', '풀'),
        ('pools', '풀들'),
        ('difficulty', '채굴 난이도'),
        ('target', '타겟'),
        ('nonce', '논스'),
        ('hashrate', '해시레이트'),
        ('hashpower', '해시파워'),
        ('asic', 'ASIC 채굴기'),
        ('gpu', 'GPU 채굴'),
        ('cpu', 'CPU 채굴'),
        ('reward', '보상'),
        ('rewards', '보상들'),
        ('block', '블록'),
        ('blocks', '블록들'),
        ('blockchain', '블록체인'),
        ('chain', '체인'),
        ('coinbase', '코인베이스 거래'),
        ('halving', '반감기'),
        ('subsidy', '블록 보조금'),
        ('fee', '수수료'),
        ('fees', '수수료들'),
        ('mempool', '멤풀'),
        ('candidate', '후보'),
        ('template', '템플릿'),
        ('work', '작업'),
        ('worker', '작업자'),
        ('workers', '작업자들'),
        ('solo', '솔로 채굴'),
        ('stratum', '스트라텀 프로토콜'),
        ('getwork', 'getwork 프로토콜'),
        
        # 네트워크/프로토콜 관련
        ('node', '노드'),
        ('nodes', '노드들'),
        ('network', '네트워크'),
        ('peer', '피어'),
        ('peers', '피어들'),
        ('p2p', 'P2P 네트워크'),
        ('consensus', '합의'),
        ('transaction', '거래'),
        ('transactions', '거래들'),
        ('tx', '거래 약어'),
        ('txid', '거래 ID'),
        ('input', '입력'),
        ('inputs', '입력들'),
        ('output', '출력'),
        ('outputs', '출력들'),
        ('utxo', '미사용 거래 출력'),
        ('script', '스크립트'),
        ('scripts', '스크립트들'),
        ('witness', '위트니스'),
        ('segwit', 'SegWit'),
        ('taproot', '탭루트'),
        ('tapscript', '탭스크립트'),
        ('broadcast', '브로드캐스트'),
        ('propagation', '전파'),
        ('relay', '릴레이'),
        ('gossip', '가십 프로토콜'),
        ('inventory', '인벤토리'),
        ('inv', '인벤토리 약어'),
        ('protocol', '프로토콜'),
        ('rpc', 'RPC'),
        ('api', 'API'),
        ('endpoint', '엔드포인트'),
        ('client', '클라이언트'),
        ('server', '서버'),
        
        # 라이트닝 네트워크
        ('lightning', '라이트닝 네트워크'),
        ('ln', '라이트닝 약어'),
        ('lnd', 'LND 구현체'),
        ('lnurl', 'LNURL 프로토콜'),
        ('bolt', 'BOLT 표준'),
        ('bolt11', 'BOLT11 인보이스'),
        ('bolt12', 'BOLT12 오퍼'),
        ('channel', '채널'),
        ('channels', '채널들'),
        ('invoice', '인보이스'),
        ('invoices', '인보이스들'),
        ('payment', '결제'),
        ('payments', '결제들'),
        ('htlc', 'HTLC'),
        ('route', '라우트'),
        ('routing', '라우팅'),
        ('onion', '어니언 라우팅'),
        ('hop', '홉'),
        ('hops', '홉들'),
        ('pathfinding', '경로 탐색'),
        ('blink', 'Blink 서비스'),
        ('strike', 'Strike 서비스'),
        ('breez', 'Breez 지갑'),
        ('phoenix', 'Phoenix 지갑'),
        ('zeus', 'Zeus 지갑'),
        ('electrum', 'Electrum 지갑'),
        
        # 기타 기술 용어
        ('timestamp', '타임스탬프'),
        ('lock', '잠금'),
        ('timelock', '시간 잠금'),
        ('locktime', '잠금 시간'),
        ('cltv', 'CLTV'),
        ('csv', 'CSV'),
        ('multisig', '다중서명'),
        ('multisignature', '다중서명'),
        ('threshold', '임계값'),
        ('quorum', '정족수'),
        ('bip', 'BIP 표준'),
        ('bips', 'BIP들'),
        ('rfc', 'RFC 표준'),
        ('standard', '표준'),
        ('implementation', '구현'),
        ('spec', '사양'),
        ('testnet', '테스트넷'),
        ('mainnet', '메인넷'),
        ('regtest', '회귀 테스트'),
        ('signet', '시그넷'),
        ('devnet', '개발자 네트워크'),
        ('fork', '포크'),
        ('hardfork', '하드포크'),
        ('softfork', '소프트포크'),
        ('upgrade', '업그레이드'),
        ('activation', '활성화'),
        ('finality', '최종성'),
        ('immutable', '불변성'),
        ('irreversible', '되돌릴 수 없는'),
        ('double-spend', '이중지불'),
        ('coinselection', '코인 선택'),
        ('rbf', 'RBF'),
        ('cpfp', 'CPFP'),
        ('anchor', '앵커'),
        ('commitment', '커밋먼트'),
        
        # 지갑/보안 관련
        ('hdwallet', 'HD 지갑'),
        ('bip32', 'BIP32 표준'),
        ('bip44', 'BIP44 표준'),
        ('derivation', '파생'),
        ('path', '경로'),
        ('xpub', '확장 공개키'),
        ('xprv', '확장 개인키'),
        ('hardware', '하드웨어'),
        ('coldwallet', '콜드 지갑'),
        ('hotwallet', '핫 지갑'),
        ('airgap', '에어갭'),
        ('offline', '오프라인'),
        ('backup', '백업'),
        ('recovery', '복구'),
        ('restore', '복원'),
        ('entropy', '엔트로피'),
        ('randomness', '무작위성'),
        ('security', '보안'),
        ('secure', '안전한'),
        ('vulnerability', '취약점'),
        ('attack', '공격'),
        ('exploit', '익스플로잇'),
        
        # 거래소/금융 관련
        ('exchange', '거래소'),
        ('exchanges', '거래소들'),
        ('trading', '트레이딩'),
        ('trade', '거래'),
        ('trader', '트레이더'),
        ('market', '마켓'),
        ('orderbook', '주문서'),
        ('bid', '매수 주문'),
        ('ask', '매도 주문'),
        ('spread', '스프레드'),
        ('liquidity', '유동성'),
        ('volume', '거래량'),
        ('custody', '수탁'),
        ('custodial', '수탁형'),
        ('noncustodial', '비수탁형'),
        ('self-custody', '자기수탁'),
        ('swap', '스왑'),
        ('dex', '탈중앙화 거래소'),
        ('cex', '중앙화 거래소'),
        ('otc', 'OTC 거래'),
        ('arbitrage', '차익거래'),
    ]
    
    # 예약어 생성 (이미 존재하지 않는 경우에만)
    for keyword, description in bitcoin_keywords:
        ReservedStoreId.objects.get_or_create(
            keyword=keyword,
            defaults={
                'description': description,
                'is_active': True
            }
        )


def remove_bitcoin_technical_keywords(apps, schema_editor):
    """마이그레이션 롤백 시 비트코인 기술 관련 예약어들을 제거"""
    ReservedStoreId = apps.get_model('stores', 'ReservedStoreId')
    
    # 비트코인 기술 예약어들만 삭제
    bitcoin_keywords = [
        '21m', '2100',
        'hash', 'hashing', 'hashes', 'sha256', 'sha', 'ripemd160', 'merkle', 'merkletree',
        'signature', 'signatures', 'sign', 'signing', 'signed', 'verify', 'verification',
        'ecdsa', 'schnorr', 'secp256k1', 'elliptic', 'curve', 'cryptography', 'crypto',
        'private', 'privatekey', 'public', 'publickey', 'key', 'keys', 'keychain',
        'address', 'addresses', 'wallet', 'wallets', 'seed', 'mnemonic', 'bip39',
        'encrypt', 'encryption', 'decrypt', 'decryption', 'cipher', 'digest',
        'proof', 'proofofwork', 'pow', 'validate', 'validation', 'verified',
        'mining', 'miner', 'miners', 'mine', 'mined', 'mining-pool', 'pool', 'pools',
        'difficulty', 'target', 'nonce', 'hashrate', 'hashpower', 'asic', 'gpu', 'cpu',
        'reward', 'rewards', 'block', 'blocks', 'blockchain', 'chain', 'coinbase',
        'halving', 'subsidy', 'fee', 'fees', 'mempool', 'candidate', 'template',
        'work', 'worker', 'workers', 'solo', 'stratum', 'getwork',
        'node', 'nodes', 'network', 'peer', 'peers', 'p2p', 'consensus',
        'transaction', 'transactions', 'tx', 'txid', 'input', 'inputs', 'output', 'outputs',
        'utxo', 'script', 'scripts', 'witness', 'segwit', 'taproot', 'tapscript',
        'broadcast', 'propagation', 'relay', 'gossip', 'inventory', 'inv',
        'protocol', 'rpc', 'api', 'endpoint', 'client', 'server',
        'lightning', 'ln', 'lnd', 'lnurl', 'bolt', 'bolt11', 'bolt12',
        'channel', 'channels', 'invoice', 'invoices', 'payment', 'payments',
        'htlc', 'route', 'routing', 'onion', 'hop', 'hops', 'pathfinding',
        'blink', 'strike', 'breez', 'phoenix', 'zeus', 'electrum',
        'timestamp', 'lock', 'timelock', 'locktime', 'cltv', 'csv',
        'multisig', 'multisignature', 'threshold', 'quorum',
        'bip', 'bips', 'rfc', 'standard', 'implementation', 'spec',
        'testnet', 'mainnet', 'regtest', 'signet', 'devnet',
        'fork', 'hardfork', 'softfork', 'upgrade', 'activation',
        'finality', 'immutable', 'irreversible', 'double-spend',
        'coinselection', 'rbf', 'cpfp', 'anchor', 'commitment',
        'hdwallet', 'bip32', 'bip44', 'derivation', 'path', 'xpub', 'xprv',
        'hardware', 'coldwallet', 'hotwallet', 'airgap', 'offline',
        'backup', 'recovery', 'restore', 'entropy', 'randomness',
        'security', 'secure', 'vulnerability', 'attack', 'exploit',
        'exchange', 'exchanges', 'trading', 'trade', 'trader', 'market',
        'orderbook', 'bid', 'ask', 'spread', 'liquidity', 'volume',
        'custody', 'custodial', 'noncustodial', 'self-custody',
        'swap', 'dex', 'cex', 'otc', 'arbitrage'
    ]
    
    ReservedStoreId.objects.filter(keyword__in=bitcoin_keywords).delete()


class Migration(migrations.Migration):

    dependencies = [
        ('stores', '0007_auto_20250611_1035'),
    ]

    operations = [
        migrations.RunPython(
            add_bitcoin_technical_keywords,
            remove_bitcoin_technical_keywords
        ),
    ]
