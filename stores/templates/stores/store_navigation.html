<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
  <div class="flex justify-between h-16">
    <!-- 왼쪽 네비게이션 -->
    <div class="flex items-center space-x-4">
      <!-- 네비게이션 드롭다운 (데스크톱) -->
      <div class="relative group hidden md:block">
        <button class="flex items-center px-3 py-2 text-gray-300 hover:text-white transition-colors">
          <i class="fas fa-compass mr-2"></i>
          내비게이션
          <i class="fas fa-chevron-down ml-2 text-xs"></i>
        </button>
        <div class="absolute left-0 mt-2 w-48 bg-gray-800 rounded-md shadow-lg py-1 z-50 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200">
          <a href="{% url 'myshop:home' %}?force_home=1" class="block px-4 py-2 text-sm text-gray-300 hover:bg-gray-700">
            <i class="fas fa-home mr-2"></i>Hub 메인으로
          </a>
          <a href="{% url 'stores:browse_stores' %}" class="block px-4 py-2 text-sm text-gray-300 hover:bg-gray-700">
            <i class="fas fa-search mr-2"></i>스토어 탐색
          </a>
        </div>
      </div>

      <!-- 스토어 이름 -->
      {% if store.store_id %}
      <div class="flex items-center space-x-6">
        <a href="{% url 'stores:store_detail' store.store_id %}" class="flex items-center space-x-2 text-white hover:text-bitcoin transition-colors">
          <span class="font-bold">{{ store.store_name }}</span>
          <span class="px-2 py-1 bg-gray-700 text-white text-xs rounded">Store</span>
        </a>
        <!-- 상품 목록 버튼 (데스크톱에서만 표시) -->
        <a href="{% url 'products:public_product_list' store.store_id %}" class="hidden md:flex items-center px-3 py-1.5 text-gray-400 hover:text-white hover:bg-gray-800 text-sm rounded-md transition-colors border border-gray-600">
          <i class="fas fa-list mr-2 text-xs"></i>
          상품 목록
        </a>
      </div>
      {% else %}
      <div class="flex items-center space-x-2 text-white">
        <span class="font-bold">{{ store.store_name }}</span>
        <span class="px-2 py-1 bg-gray-700 text-white text-xs rounded">Store</span>
      </div>
      {% endif %}
    </div>

    <!-- 오른쪽 네비게이션 -->
    <div class="flex items-center space-x-4">
      <!-- 모바일 메뉴 버튼 -->
      <button id="mobile-menu-button" class="md:hidden flex items-center justify-center w-12 h-12 text-gray-300 hover:text-white hover:bg-gray-800 transition-colors rounded-lg touch-manipulation focus:outline-none focus:ring-2 focus:ring-blue-500 active:bg-gray-700" style="min-height: 44px; min-width: 44px;">
        <i class="fas fa-bars text-lg pointer-events-none"></i>
      </button>

      <!-- 데스크톱 메뉴 -->
      <div class="hidden md:flex items-center space-x-4">
        {% if user.is_authenticated %}
        <!-- 사용자 드롭다운 -->
        <div class="relative group">
          <button class="flex items-center px-3 py-2 text-gray-300 hover:text-white transition-colors">
            <i class="fas fa-user mr-2"></i>
            {{ user.username }}님
            <i class="fas fa-chevron-down ml-2 text-xs"></i>
          </button>
          <div class="absolute right-0 mt-2 w-48 bg-gray-800 rounded-md shadow-lg py-1 z-50 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200">
            <a href="{% url 'accounts:mypage' %}" class="block px-4 py-2 text-sm text-gray-300 hover:bg-gray-700">
              <i class="fas fa-user-cog mr-2"></i>마이페이지
            </a>
            <div class="border-t border-gray-600"></div>
            <a href="#" onclick="logout()" class="block px-4 py-2 text-sm text-gray-300 hover:bg-gray-700">
              <i class="fas fa-sign-out-alt mr-2"></i>로그아웃
            </a>
          </div>
        </div>

        {% if user_has_active_store and user_active_store.is_active %}
        <!-- 스토어 관리 드롭다운 -->
        <div class="relative group">
          <button class="flex items-center px-3 py-2 text-gray-300 hover:text-white transition-colors">
            <i class="fas fa-cog mr-2"></i>
            스토어 관리
            <i class="fas fa-chevron-down ml-2 text-xs"></i>
          </button>
          <div class="absolute right-0 mt-2 w-48 bg-gray-800 rounded-md shadow-lg py-1 z-50 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200">
            {% if user_active_store.store_id %}
            <a href="{% url 'stores:product_list' store_id=user_active_store.store_id %}" class="block px-4 py-2 text-sm text-gray-300 hover:bg-gray-700">
              <i class="fas fa-box mr-2"></i>상품관리
            </a>
            <a href="{% url 'orders:order_management' store_id=user_active_store.store_id %}" class="block px-4 py-2 text-sm text-gray-300 hover:bg-gray-700">
              <i class="fas fa-shopping-cart mr-2"></i>주문관리
            </a>
            <div class="border-t border-gray-600"></div>
            {% endif %}
            <a href="{% url 'stores:my_stores' %}" class="block px-4 py-2 text-sm text-gray-300 hover:bg-gray-700">
              <i class="fas fa-store mr-2"></i>스토어 관리
            </a>
            {% if user_active_store.store_id %}
            <div class="border-t border-gray-600"></div>
            <a href="{% url 'stores:store_detail' store_id=user_active_store.store_id %}" class="block px-4 py-2 text-sm text-gray-300 hover:bg-gray-700">
              <i class="fas fa-eye mr-2"></i>내 스토어 보기
            </a>
            <a href="{% url 'boards:notice_list' %}" class="block px-4 py-2 text-sm text-gray-300 hover:bg-gray-700">
              <i class="fas fa-bullhorn mr-2"></i>사이트 공지사항 확인
            </a>
            <div class="border-t border-gray-600"></div>
            <a href="#" onclick="toggleTheme(); return false;" class="block px-4 py-2 text-sm text-gray-300 hover:bg-gray-700">
              <span class="theme-toggle-menu-item">
                <i class="fas fa-sun theme-sun-icon" style="display: none;"></i>
                <i class="fas fa-moon theme-moon-icon mr-2"></i>
                <span class="theme-text">다크 모드로</span>
              </span>
            </a>
            {% endif %}
          </div>
        </div>
        {% else %}
        <!-- 일반 사용자 설정 드롭다운 -->
        <div class="relative group">
          <button class="flex items-center px-3 py-2 text-gray-300 hover:text-white transition-colors">
            <i class="fas fa-cog mr-2"></i>
            설정
            <i class="fas fa-chevron-down ml-2 text-xs"></i>
          </button>
          <div class="absolute right-0 mt-2 w-48 bg-gray-800 rounded-md shadow-lg py-1 z-50 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200">
            <a href="{% url 'stores:create_store' %}" class="block px-4 py-2 text-sm text-gray-300 hover:bg-gray-700">
              <i class="fas fa-plus mr-2"></i>스토어 만들기
            </a>
            <div class="border-t border-gray-600"></div>
            <a href="#" onclick="toggleTheme(); return false;" class="block px-4 py-2 text-sm text-gray-300 hover:bg-gray-700">
              <span class="theme-toggle-menu-item">
                <i class="fas fa-sun theme-sun-icon" style="display: none;"></i>
                <i class="fas fa-moon theme-moon-icon mr-2"></i>
                <span class="theme-text">다크 모드로</span>
              </span>
            </a>
          </div>
        </div>
        {% endif %}

        {% else %}
        <!-- 비로그인 사용자 설정 드롭다운 -->
        <div class="relative group">
          <button class="flex items-center px-3 py-2 text-gray-300 hover:text-white transition-colors">
            <i class="fas fa-cog mr-2"></i>
            설정
            <i class="fas fa-chevron-down ml-2 text-xs"></i>
          </button>
          <div class="absolute right-0 mt-2 w-48 bg-gray-800 rounded-md shadow-lg py-1 z-50 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200">
            <a href="#" onclick="toggleTheme(); return false;" class="block px-4 py-2 text-sm text-gray-300 hover:bg-gray-700">
              <span class="theme-toggle-menu-item">
                <i class="fas fa-sun theme-sun-icon" style="display: none;"></i>
                <i class="fas fa-moon theme-moon-icon mr-2"></i>
                <span class="theme-text">다크 모드로</span>
              </span>
            </a>
            <div class="border-t border-gray-600"></div>
            <a href="#" onclick="redirectToSignup()" class="block px-4 py-2 text-sm text-gray-300 hover:bg-gray-700">
              <i class="fas fa-user-plus mr-2"></i>회원가입
            </a>
            <a href="#" onclick="redirectToLogin()" class="block px-4 py-2 text-sm text-gray-300 hover:bg-gray-700">
              <i class="fas fa-sign-in-alt mr-2"></i>로그인
            </a>
          </div>
        </div>
        {% endif %}
      </div>
    </div>
  </div>

  <!-- 모바일 메뉴 -->
  <div id="mobile-menu" class="md:hidden hidden border-t border-gray-700 py-4">
    <!-- 네비게이션 링크 -->
    <div class="space-y-2 mb-4">
      <a href="{% url 'myshop:home' %}?force_home=1" class="flex items-center px-3 py-2 text-gray-300 hover:bg-gray-700 rounded-lg transition-colors">
        <i class="fas fa-home mr-3"></i>Hub 메인으로
      </a>
      <a href="{% url 'stores:browse_stores' %}" class="flex items-center px-3 py-2 text-gray-300 hover:bg-gray-700 rounded-lg transition-colors">
        <i class="fas fa-search mr-3"></i>스토어 탐색
      </a>
      {% if store.store_id %}
      <a href="{% url 'products:public_product_list' store.store_id %}" class="flex items-center px-3 py-2 text-gray-400 hover:text-white hover:bg-gray-700 rounded-lg transition-colors border border-gray-600">
        <i class="fas fa-list mr-3 text-xs"></i>상품 목록
      </a>
      {% endif %}
    </div>

    {% if user.is_authenticated %}
    <!-- 사용자 메뉴 -->
    <div class="border-t border-gray-600 pt-4 space-y-2">
      <div class="px-3 py-2 text-sm text-gray-400">{{ user.username }}님</div>
      <a href="{% url 'accounts:mypage' %}" class="flex items-center px-3 py-2 text-gray-300 hover:bg-gray-700 rounded-lg transition-colors">
        <i class="fas fa-user-cog mr-3"></i>마이페이지
      </a>
      {% if user_has_active_store and user_active_store.is_active %}
      <a href="{% url 'stores:product_list' store_id=user_active_store.store_id %}" class="flex items-center px-3 py-2 text-gray-300 hover:bg-gray-700 rounded-lg transition-colors">
        <i class="fas fa-box mr-3"></i>상품관리
      </a>
      <a href="{% url 'orders:order_management' store_id=user_active_store.store_id %}" class="flex items-center px-3 py-2 text-gray-300 hover:bg-gray-700 rounded-lg transition-colors">
        <i class="fas fa-shopping-cart mr-3"></i>주문관리
      </a>
      <a href="{% url 'stores:my_stores' %}" class="flex items-center px-3 py-2 text-gray-300 hover:bg-gray-700 rounded-lg transition-colors">
        <i class="fas fa-store mr-3"></i>스토어 관리
      </a>
      <a href="{% url 'boards:notice_list' %}" class="flex items-center px-3 py-2 text-gray-300 hover:bg-gray-700 rounded-lg transition-colors">
        <i class="fas fa-bullhorn mr-3"></i>사이트 공지사항 확인
      </a>
      {% else %}
      <a href="{% url 'stores:create_store' %}" class="flex items-center px-3 py-2 text-gray-300 hover:bg-gray-700 rounded-lg transition-colors">
        <i class="fas fa-plus mr-3"></i>스토어 만들기
      </a>
      {% endif %}
      <button onclick="toggleTheme(); return false;" class="w-full flex items-center px-3 py-2 text-gray-300 hover:bg-gray-700 rounded-lg transition-colors">
        <span class="theme-toggle-menu-item flex items-center">
          <i class="fas fa-sun theme-sun-icon mr-3" style="display: none;"></i>
          <i class="fas fa-moon theme-moon-icon mr-3"></i>
          <span class="theme-text">다크 모드로</span>
        </span>
      </button>
      <button onclick="logout()" class="w-full flex items-center px-3 py-2 text-gray-300 hover:bg-gray-700 rounded-lg transition-colors">
        <i class="fas fa-sign-out-alt mr-3"></i>로그아웃
      </button>
    </div>
    {% else %}
    <div class="border-t border-gray-600 pt-4 space-y-2">
      <button onclick="toggleTheme(); return false;" class="w-full flex items-center px-3 py-2 text-gray-300 hover:bg-gray-700 rounded-lg transition-colors">
        <span class="theme-toggle-menu-item flex items-center">
          <i class="fas fa-sun theme-sun-icon mr-3" style="display: none;"></i>
          <i class="fas fa-moon theme-moon-icon mr-3"></i>
          <span class="theme-text">다크 모드로</span>
        </span>
      </button>
      <button onclick="redirectToSignup()" class="w-full flex items-center px-3 py-2 text-gray-300 hover:bg-gray-700 rounded-lg transition-colors">
        <i class="fas fa-user-plus mr-3"></i>회원가입
      </button>
      <button onclick="redirectToLogin()" class="w-full flex items-center px-3 py-2 text-gray-300 hover:bg-gray-700 rounded-lg transition-colors">
        <i class="fas fa-sign-in-alt mr-3"></i>로그인
      </button>
    </div>
    {% endif %}
  </div>
</div> 